<div class="mat-spinner-container" *ngIf="!loadedPage">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>
<div *ngIf="loadedPage" class="row">
  <div class="col-sm-3 col-md-4"></div>
  <div class="col-sm-6 col-md-4">
    <mat-card>
      <mat-card-header class="d-flex" style="justify-content: center">
        <mat-card-title style="text-align: center">
          Редактирование профиля
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="profileForm">
          <div class="pr-3 pl-3">
            <div class="d-flex" style="justify-content: center">
              <img id="output" mat-card-avatar src="{{userInfo.avatar}}" [hidden]="imgHidden" (load)="imgLoaded()" style="width: 200px; height: 200px">
              <div *ngIf="imgHidden" style="width: 200px; height: 200px" class="d-flex justify-content-center align-items-center">
                <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
              </div>
            </div>
            <div class="mt-3 d-flex" style="justify-content: center">
              <button mat-flat-button class="mat-btn" (click)="chooseAvatar()">Выбрать фото</button>
              <input #inputFile id="avatar" hidden type="file" accept=".jpg, .png" formControlName="avatar" onchange="document.getElementById('output').src = window.URL.createObjectURL(this.files[0])" (change)="changeAvatarFile($event)">
            </div>
            <div *ngIf="!profileForm.value.avatar" class="mt-3" style="text-align: center">
              Формат фото: .jpg, .png
            </div>
            <div *ngIf="profileForm.value.avatar" class="mt-3" style="text-align: center">
              <span>Выбран файл: </span> {{avatarFile}}
            </div>
            <mat-form-field>
              <mat-label>Имя</mat-label>
              <input matInput type="text" formControlName="name">
            </mat-form-field>
            <mat-form-field>
              <mat-label>Фамилия</mat-label>
              <input matInput type="text" formControlName="surname">
            </mat-form-field>
            <mat-form-field>
              <mat-label>Страна</mat-label>
              <input matInput type="text" formControlName="country">
            </mat-form-field>
            <mat-form-field>
              <mat-label>Город</mat-label>
              <input matInput type="text" formControlName="city">
            </mat-form-field>
            <div class="d-flex" style="justify-content: center">
              <button type="submit" mat-flat-button class="mat-btn" [disabled]="editing" (click)="editProfile()">Сохранить</button>
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>

